(()=>{"use strict";var t,e=(t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=function(){function t(t){this.index=0,this.src=t}return t.prototype.next=function(){return this.hasNext()?{done:!1,value:this.src.charAt(this.index++)}:{done:!0,value:""}},t.prototype.hasNext=function(){return this.src.length>this.index},t.prototype.readAll=function(){var t=this.index;return this.index=this.src.length,this.src.substring(t,this.src.length)},t.prototype.readBeforeChar=function(t){for(var e="";this.hasNext();){for(var r=this.next().value,n=0;n<t.length;n++)if(r===t.charAt(n))return{detected:r,value:e};e+=r}return{detected:"",value:e}},t.prototype.readBeforeCharWithNest=function(t,e,r,n){for(var o=t+e,i=e.charAt(0),u=e.charAt(1),a=n?1:0,c="";this.hasNext();)if(a>0){if((s=this.readBeforeChar(e)).detected===i&&a++,s.detected===u&&0==--a&&n)return{detected:s.detected,value:c+s.value};c+=s.value+s.detected}else{var s;if((s=this.readBeforeChar(o)).detected!==i)return s.detected===u?{detected:u,value:c+s.value}:{detected:s.detected,value:c+s.value};if(r)return{detected:i,value:c+s.value};a++,c+=s.value+s.detected}return{detected:"",value:c}},t}(),o=function(){function t(t){this.imported=t?t.get().slice():[]}return t.prototype.add=function(t){this.imported.push(t)},t.prototype.get=function(){return this.imported},t}(),i=function(){function t(t,e){this.map=t?Object.create(t.getMap()):{},this.parent=null!=t?t:null,this.imported=null!=e?e:new o}return t.prototype.newScope=function(){return new t(this,this.imported)},t.prototype.has=function(t){return t in this.map},t.prototype.get=function(t){return this.map[t]},t.prototype.set=function(t,e){var r;(null===(r=this.parent)||void 0===r?void 0:r.has(t))?this.parent.set(t,e):this.map[t]=e},t.prototype.setAsOwn=function(t,e){this.map[t]=e},t.prototype.getMap=function(){return this.map},t.prototype.getStructureString=function(){return"VariableMap: "+JSON.stringify(this,null,2)},t}(),u=function(){function t(){}var e;return e=t,t.NEST="{}",t.NEST_START=e.NEST.charAt(0),t.NEST_END=e.NEST.charAt(1),t.VARIABLE="\\",t.INVOKER=":",t.SEPARATOR=";",t}(),a=function(){function t(){this.childs=[],this.indenter="|   "}return t.prototype.iterator=function(){var e=this;return this.childs,new(function(){function r(){this.index=-1}return r.prototype.next=function(){var r,n=!!(r=e.getAt(++this.index));return{done:!n,value:n?r:t.NULL}},r.prototype[Symbol.iterator]=function(){return this},r}())},t.prototype.invoke=function(t,e){return t},t.prototype.invokeFinal=function(t){return this},t.prototype.getAt=function(t){return this.childs[t]},t.prototype.set=function(t){this.childs=t},t.prototype.setAt=function(t,e){this.childs[t]=e},t.prototype.append=function(t){this.childs.push(t)},t.NULL=new(function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.TAG="NULL",e}return e(r,t),r.prototype.invoke=function(t,e){return this},r.prototype.getStructureString=function(t){return void 0===t&&(t=""),t+this.indenter+this.TAG+"\n"},r}(t)),t}(),c=function(t){function o(e){for(var r=t.call(this)||this,n=[];e.hasNext();)n.push(e.readBeforeCharWithNest(u.SEPARATOR,u.NEST).value);return r.notLoaded=n,r.set(Array(n.length)),r}return e(o,t),o.prototype.getAt=function(e){var r;return t.prototype.getAt.call(this,e)||"string"!=typeof(r=this.notLoaded[e])||(this.setAt(e,(new d).setIterator(new n(r)).setType(1).build()),this.notLoaded[e]=null),t.prototype.getAt.call(this,e)},o.prototype.invoke=function(t,e){var n,o,i=e.newScope();try{for(var u=r(this.iterator()),a=u.next();!a.done;a=u.next())a.value.invoke(t,i)}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return this},o.prototype.invokeFinal=function(t){var e,n,o=t.newScope();try{for(var i=r(this.iterator()),u=i.next();!u.done;u=i.next())u.value.invokeFinal(o)}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},o.prototype.getStructureString=function(t){void 0===t&&(t="");for(var e=this.indenter,r="",n=t+e,o=0;o<this.notLoaded.length;o++){var i=this.notLoaded[o],u=void 0;i?(r+=n,r+=i,r+="\n"):(u=this.getAt(o))?r+=u.getStructureString(t+e):r+=a.NULL.getStructureString()}return"".concat(t,"Paragraph: {\n").concat(r).concat(t,"}\n")},o}(a),s=function(t){function o(e){var r=t.call(this)||this;r.indenter="-   ";for(var o="";e.hasNext();){var i=e.readBeforeCharWithNest("\\:","{}",!0,o===u.NEST_START);o===u.NEST_END&&(o="");var a=i.value;(o===u.VARIABLE||o===u.INVOKER||o===u.NEST_START||a.length>0)&&r.append((new d).setIterator(new n(o+a)).setType(2).build()),o=i.detected}return r}return e(o,t),o.prototype.invokeFinal=function(t){var e,n,o=this.iterator(),i=o.next();if(i.done)return a.NULL;var u=i.value;try{for(var c=r(o),s=c.next();!s.done;s=c.next()){var h=s.value;u=u.invoke(h,t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u.invokeFinal(t)},o.prototype.getStructureString=function(t){var e,n;void 0===t&&(t="");var o=this.indenter,i=t+"Sentence: \n";try{for(var u=r(this.iterator()),a=u.next();!a.done;a=u.next())i+=a.value.getStructureString(t+o)}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return i},o}(a),h=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.indenter="+   ",e}return e(r,t),r}(a),l=function(t){function r(e){var r=t.call(this)||this;return r.name=e,r}return e(r,t),r.prototype.invoke=function(t,e){var r=t.iterator().next();if(r.done)return e.has(this.name)?e.get(this.name):a.NULL;var n=r.value.invokeFinal(e);return e.set(this.name,n),n},r.prototype.getStructureString=function(t){void 0===t&&(t="");var e=this.indenter;return"".concat(t,"Variable: \n").concat(t).concat(e,"\\").concat(this.name,"\n")},r}(h),p=function(t){function r(e){var r=t.call(this)||this;return r.notLoaded=e,r}return e(r,t),r.prototype.getStructureString=function(t){void 0===t&&(t="");var e=this.indenter;return"".concat(t,"Invoker: \n").concat(t).concat(e,":").concat(this.notLoaded,"\n")},r}(h),f=function(t){function r(e){var r=t.call(this)||this;return r.text=e,r}return e(r,t),r.prototype.getStructureString=function(t){void 0===t&&(t="");var e=this.indenter;return"".concat(t,"Text: \n").concat(t).concat(e,'"').concat(this.text,'"\n')},r}(h),d=function(){function t(){this.iterator=null,this.type=null}return t.prototype.setIterator=function(t){return this.iterator=t,this},t.prototype.setType=function(t){return this.type=t,this},t.prototype.build=function(){if(this.type||(this.type=0),!this.iterator)throw"iterator must be set.";if(0===this.type)return new c(this.iterator);if(1===this.type)return new s(this.iterator);var t=this.iterator.next().value;if(t===u.VARIABLE)return new l(this.iterator.readAll());if(t===u.NEST_START)return new c(this.iterator);if(t===u.INVOKER)return new p(this.iterator.readAll());var e=t+this.iterator.readAll();return e.length>0?new f(e):a.NULL},t}(),v=function(){function t(){}return t.isSymbol=function(t){for(var e=0;e<this.symbols.length;e++)if(t===this.symbols[e])return!0;return!1},t.isIgnore=function(t){for(var e=0;e<this.ignores.length;e++)if(t===this.ignores[e])return!0;return!1},t.parse=function(e){for(var r=new n(e),o="{",u=!1,a="";r.hasNext();){var c=r.next().value;t.isIgnore(c)?u=!0:(u&&(u=!1,t.isSymbol(c)||t.isSymbol(o)||(a+=" ")),a+=c,o=c)}return(new d).setIterator(new n(a)).build().invokeFinal(new i)},t.symbols="{};:\\",t.ignores=" \n",t}();console.log(v),console.log("Hello World!")})();